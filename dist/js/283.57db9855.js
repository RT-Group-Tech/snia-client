"use strict";(self["webpackChunksnia"]=self["webpackChunksnia"]||[]).push([[283],{3283:function(t,e,o){o.r(e),o.d(e,{default:function(){return mi}});var n=o(6252);const s={class:"main-panel"},i={class:"container"},l={class:"panel-header"},a={class:"page-inner py-4"},c={class:"page-header"},r=(0,n._)("h4",{class:"page-title"},"Formulaires",-1),u={class:"breadcrumbs"},d={class:"nav-home"},p=(0,n._)("i",{class:"flaticon-home"},null,-1),m=(0,n._)("li",{class:"separator"},[(0,n._)("i",{class:"flaticon-right-arrow"})],-1),b=(0,n._)("li",{class:"nav-item"},[(0,n._)("a",{href:"#"},"Configuration formulaires")],-1),_={class:"page-inner mt--5"},g={class:"row"},f={class:"col-md-12"},h={class:"card"},v=(0,n._)("div",{class:"card-header"},[(0,n._)("h4",{class:"card-title fw-bold"},"Menu Configuration formulaire")],-1),y={class:"card-body"},w={class:"row"},k=(0,n._)("div",{class:"col-12 col-md-3"},[(0,n._)("div",{class:"nav flex-column nav-pills nav-info nav-pills-no-bd nav-pills-icons",id:"v-pills-tab",role:"tablist","aria-orientation":"vertical"},[(0,n._)("a",{class:"nav-link active show",id:"v-pills-home-tab-icons","data-toggle":"pill",href:"#v-pills-topic",role:"tab","aria-controls":"v-pills-topic","aria-selected":"true"},[(0,n._)("i",{class:"fas fa-pen-square"}),(0,n.Uk)(" Création sujets ")]),(0,n._)("a",{class:"nav-link",id:"v-pills-buy-tab-icons","data-toggle":"pill",href:"#v-pills-forms",role:"tab","aria-controls":"v-pills-forms","aria-selected":"false"},[(0,n._)("i",{class:"flaticon-interface-6"}),(0,n.Uk)(" Formulaires ")])])],-1),x={class:"col-12 col-md-9"},C={class:"tab-content",id:"v-pills-tabContent"};function S(t,e,o,S,D,I){const M=(0,n.up)("router-link"),U=(0,n.up)("topic-tab"),V=(0,n.up)("forms-view");return(0,n.wg)(),(0,n.iD)("div",s,[(0,n._)("div",i,[(0,n._)("div",l,[(0,n._)("div",a,[(0,n._)("div",c,[r,(0,n._)("ul",u,[(0,n._)("li",d,[(0,n.Wm)(M,{to:{name:"dashboard-route"}},{default:(0,n.w5)((()=>[p])),_:1})]),m,b])])])]),(0,n._)("div",_,[(0,n._)("div",g,[(0,n._)("div",f,[(0,n._)("div",h,[v,(0,n._)("div",y,[(0,n._)("div",w,[k,(0,n._)("div",x,[(0,n._)("div",C,[(0,n.Wm)(U),(0,n.Wm)(V)])])])])])])])])])])}o(7658);var D=o(9963);const I={class:"tab-pane fade active show",id:"v-pills-topic",role:"tabpanel","aria-labelledby":"v-pills-home-tab-icons"},M={class:"accordion accordion-secondary"},U={class:"card"},V={class:"card-body p-0"},F={class:"form-group"},j=(0,n._)("label",{for:"to",class:"col-form-label mb-2"},"Sujet",-1),L=["onUpdate:modelValue"],O={class:"input-group-append"},q=(0,n._)("i",{class:"flaticon-add"},null,-1),B=[q],E=["onClick"],T=(0,n._)("i",{class:"icon-trash"},null,-1),N=[T],P={class:"card-footer"},H=["disabled"],Y={key:0,class:"fa fa-spinner fa-spin mr-2"},Z=(0,n._)("button",{type:"reset",class:"btn btn-danger"},"Annuler",-1);function A(t,e,o,s,i,l){return(0,n.wg)(),(0,n.iD)("div",I,[(0,n._)("form",{onSubmit:e[1]||(e[1]=(0,D.iM)(((...t)=>l.submitForm&&l.submitForm(...t)),["prevent"])),id:"form-sujet"},[(0,n._)("div",M,[(0,n._)("div",U,[(0,n._)("div",V,[(0,n._)("div",F,[j,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(i.forms,((t,o)=>((0,n.wg)(),(0,n.iD)("div",{class:"input-group mb-2",key:o},[(0,n.wy)((0,n._)("input",{type:"text","onUpdate:modelValue":e=>t.data=e,placeholder:"Entrer le sujet...",class:"form-control",required:""},null,8,L),[[D.nr,t.data]]),(0,n._)("div",O,[o===i.forms.length-1?((0,n.wg)(),(0,n.iD)("button",{key:0,onClick:e[0]||(e[0]=(0,D.iM)((t=>i.forms.push({data:""})),["prevent"])),class:"btn btn-primary btn-icon",type:"submit"},B)):((0,n.wg)(),(0,n.iD)("button",{key:1,onClick:(0,D.iM)((t=>i.forms.splice(o,1)),["prevent"]),class:"btn btn-dark btn-icon"},N,8,E))])])))),128))])]),(0,n._)("div",P,[(0,n._)("button",{type:"submit",disabled:i.formLoading,class:"btn btn-success mr-2"},[i.formLoading?((0,n.wg)(),(0,n.iD)("i",Y)):(0,n.kq)("",!0),(0,n.Uk)("Sauvegarder")],8,H),Z])])])],32)])}var K=o(243),z={name:"SubCreate-Subject-Page",data(){return{forms:[],formLoading:!1}},created(){this.forms.push({data:""})},methods:{submitForm(t){this.$validForm("form-sujet",t,(async(t,e)=>{if(t){this.formLoading=!0;for(let t=0;t<this.forms.length;t++)await K.Z.creerSujet(this.forms[t].data,(t=>{console.log(JSON.stringify(t))}));this.cleanForm(),this.formLoading=!1,$.notify({icon:"fas fa-check",title:"Succès !",message:"Création des sujets effectués avec succès !"},{type:"success",placement:{from:"bottom",align:"right"},time:1e3}),await this.$store.dispatch("voirSujets")}else this.$animatedFailedTask("submit-btn")}))},cleanForm(){for(let t=0;t<this.forms.length;t++)this.forms[t].data=""}}},W=o(3744);const Q=(0,W.Z)(z,[["render",A]]);var R=Q,G=o(3577);const J={class:"tab-pane fade",id:"v-pills-forms-config",role:"tabpanel","aria-labelledby":"v-pills-home-tab-icons"},X={class:"accordion accordion-secondary"},tt={class:"card"},et={class:"card-body p-0"},ot={class:"row mb-2"},nt={class:"col-md-6"},st={class:"form-group"},it=(0,n._)("label",{class:"col-form-label"},"Formulaire titre",-1),lt={class:"col-md-6"},at={class:"form-group"},ct=(0,n._)("label",{class:"col-form-label"},"Sélectionner un sujet de liaison",-1),rt=(0,n._)("option",{selected:""},"Sélectionner un sujet",-1),ut=["value"],dt=["id"],pt={class:"card"},mt={class:"card-header p-0 d-flex justify-content-between","aria-expanded":"true","aria-controls":"collapseOne",role:"button"},bt=(0,n._)("div",{class:"span-icon"},[(0,n._)("div",{class:"flaticon-interface-4"})],-1),_t={class:"span-title"},gt=(0,n._)("i",{class:"flaticon-add"},null,-1),ft=[gt],ht=["onClick"],vt=(0,n._)("i",{class:"icon-trash"},null,-1),yt=[vt],wt={class:"card-body p-0"},kt={class:"row"},xt={class:"col-md-12 mt-2"},Ct={class:"row"},St={class:"col-md-12"},Dt={class:"form-group"},It=["onUpdate:modelValue"],Mt={class:"col-md-12"},Ut={class:"form-group"},Vt=["onUpdate:modelValue"],Ft=["onChange","onUpdate:modelValue"],jt=(0,n.uE)('<option value="">Sélectionner </option><option value="text">Zone de texte</option><option value="select">Liste déroulante</option><option value="checkbox">Case à cocher</option><option value="file">Fichier</option><option value="date">Date</option><option value="number">Numéro</option>',7),$t=[jt],Lt={class:"input-group-append"},Ot=["onClick"],qt=(0,n._)("i",{class:"flaticon-add"},null,-1),Bt=[qt],Et=["onClick"],Tt=(0,n._)("i",{class:"icon-trash"},null,-1),Nt=[Tt],Pt={key:0,class:"card-footer"},Ht=["disabled"],Yt={key:0,class:"fa fa-spinner fa-spin mr-2"},Zt=(0,n._)("button",{type:"reset",class:"btn btn-danger"},"Annuler",-1),At={key:0,class:"quick-sidebar animated fadeInRight",tabindex:"-1"},Kt=(0,n._)("i",{class:"flaticon-cross"},null,-1),zt=[Kt],Wt={class:"quick-sidebar-wrapper"},Qt={class:"quick-wrapper tasks-wrapper"},Rt={class:"tasks-scroll scrollbar-outer"},Gt={class:"tasks-content"},Jt=(0,n._)("span",{class:"category-title"},"Entrer les options",-1),Xt={class:"input-group mb-2"},te=["onUpdate:modelValue"],ee={class:"input-group-append"},oe=(0,n._)("i",{class:"flaticon-add"},null,-1),ne=[oe],se=["onClick"],ie=(0,n._)("i",{class:"icon-trash"},null,-1),le=[ie],ae=["onClick"],ce=(0,n._)("i",{class:"flaticon-add mr-1"},null,-1),re=(0,n._)("span",{class:"category-title"},null,-1),ue={class:"d-flex"},de=(0,n._)("button",{class:"btn btn-success mr-2",type:"submit"},"Valider & sauvegarder ",-1);function pe(t,e,o,s,i,l){const a=(0,n.up)("sous-inputs");return(0,n.wg)(),(0,n.iD)("div",J,[(0,n._)("form",{onSubmit:e[3]||(e[3]=(0,D.iM)(((...t)=>l.submitForm&&l.submitForm(...t)),["prevent"])),id:"form-formulaires"},[(0,n._)("div",X,[(0,n._)("div",tt,[(0,n._)("div",et,[(0,n._)("div",ot,[(0,n._)("div",nt,[(0,n._)("div",st,[it,(0,n.wy)((0,n._)("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>i.form.titre=t),placeholder:"Entrer le titre du formulaire...",class:"form-control",required:""},null,512),[[D.nr,i.form.titre]])])]),(0,n._)("div",lt,[(0,n._)("div",at,[ct,(0,n.wy)((0,n._)("select",{"onUpdate:modelValue":e[1]||(e[1]=t=>i.form.sujet_id=t),class:"form-control custom-select",id:"defaultSelect",required:""},[rt,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(l.sujets,(t=>((0,n.wg)(),(0,n.iD)("option",{key:t.sujet_id,value:t.sujet_id},(0,G.zw)(t.sujet),9,ut)))),128))],512),[[D.bM,i.form.sujet_id]])])])])])])]),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(i.form.sections,((t,o)=>((0,n.wg)(),(0,n.iD)("div",{class:"accordion",id:`section${o}`,key:o},[(0,n._)("div",pt,[(0,n._)("div",mt,[bt,(0,n._)("div",_t," SECTION "+(0,G.zw)(o+1),1),(0,n._)("div",null,[o===i.form.sections.length-1?((0,n.wg)(),(0,n.iD)("button",{key:0,class:"btn m-1 btn-icon btn-success",onClick:e[2]||(e[2]=(0,D.iM)(((...t)=>l.addNewSection&&l.addNewSection(...t)),["prevent"]))},ft)):((0,n.wg)(),(0,n.iD)("button",{key:1,class:"btn m-1 btn-icon btn-dark",onClick:(0,D.iM)((t=>i.form.sections.splice(o,1)),["prevent"])},yt,8,ht))])]),(0,n._)("div",wt,[(0,n._)("div",kt,[(0,n._)("div",xt,[(0,n._)("div",Ct,[(0,n._)("div",St,[(0,n._)("div",Dt,[(0,n._)("label",null,"Section "+(0,G.zw)(o+1)+" titre",1),(0,n.wy)((0,n._)("input",{type:"text","onUpdate:modelValue":e=>t.section=e,class:"form-control",placeholder:"Entrer le titre de la section...",required:""},null,8,It),[[D.nr,t.section]])])]),(0,n._)("div",Mt,[(0,n._)("div",Ut,[(0,n._)("label",null,"Section "+(0,G.zw)(o+1)+" contenus/Champs",1),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(t.contents,((e,s)=>((0,n.wg)(),(0,n.iD)("div",{class:"input-group mb-2",key:s},[(0,n.wy)((0,n._)("input",{type:"text","onUpdate:modelValue":t=>e.input=t,placeholder:"Détail",class:"form-control",required:""},null,8,Vt),[[D.nr,e.input]]),(0,n.wy)((0,n._)("select",{name:"input_type",onChange:t=>l.onChangeValue({sectionIndex:o,contentIndex:s,value:e.input_type}),class:"custom-select form-control",id:"input_type",required:"","onUpdate:modelValue":t=>e.input_type=t},$t,40,Ft),[[D.bM,e.input_type]]),(0,n._)("div",Lt,[s===t.contents.length-1?((0,n.wg)(),(0,n.iD)("button",{key:0,class:"btn btn-primary btn-icon",onClick:(0,D.iM)((e=>t.contents.push({input:"",input_type:"",options:[]})),["prevent"])},Bt,8,Ot)):((0,n.wg)(),(0,n.iD)("button",{key:1,class:"btn btn-icon btn-dark",onClick:(0,D.iM)((e=>t.contents.splice(s,1)),["prevent"])},Nt,8,Et))])])))),128))])])])])])]),o===i.form.sections.length-1?((0,n.wg)(),(0,n.iD)("div",Pt,[(0,n._)("button",{type:"submit",disabled:i.formLoading,id:"forms-submit-btn",class:"btn btn-success mr-2"},[i.formLoading?((0,n.wg)(),(0,n.iD)("i",Yt)):(0,n.kq)("",!0),(0,n.Uk)("Sauvegarder")],8,Ht),Zt])):(0,n.kq)("",!0)])],8,dt)))),128))],32),null!==i.selectedContentIndex&&null!==i.selectedSectionIndex?((0,n.wg)(),(0,n.iD)("div",At,[(0,n._)("a",{href:"javascript:void(0)",onClick:e[4]||(e[4]=(...t)=>l.closeQuickActionPanel&&l.closeQuickActionPanel(...t)),class:"close-quick-sidebar"},zt),(0,n._)("div",Wt,[(0,n._)("div",Qt,[(0,n._)("div",Rt,[(0,n._)("form",{onSubmit:e[7]||(e[7]=(0,D.iM)(((...t)=>l.submitFormOptions&&l.submitFormOptions(...t)),["prevent"]))},[(0,n._)("div",Gt,[Jt,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(i.form.sections[i.selectedSectionIndex].contents[i.selectedContentIndex].options,((t,o)=>((0,n.wg)(),(0,n.iD)("div",{key:o},[(0,n._)("div",Xt,[(0,n.wy)((0,n._)("input",{type:"text","onUpdate:modelValue":e=>t.input_option=e,placeholder:"Entrer une option...",class:"form-control",required:""},null,8,te),[[D.nr,t.input_option]]),(0,n._)("div",ee,[o===i.form.sections[i.selectedSectionIndex].contents[i.selectedContentIndex].options.length-1?((0,n.wg)(),(0,n.iD)("button",{key:0,class:"btn btn-icon btn-primary",onClick:e[5]||(e[5]=(0,D.iM)(((...t)=>l.addOptions&&l.addOptions(...t)),["prevent"]))},ne)):((0,n.wg)(),(0,n.iD)("button",{key:1,class:"btn btn-icon btn-dark",onClick:(0,D.iM)((t=>i.form.sections[i.selectedSectionIndex].contents[i.selectedContentIndex].options.splice(o,1)),["prevent"])},le,8,se))]),void 0!==t.configSousInputs||!0===t.configSousInputs?((0,n.wg)(),(0,n.j4)(a,{key:0,onOnsave:l.saveSousInputs,index:o},null,8,["onOnsave","index"])):(0,n.kq)("",!0)]),(0,n.wy)((0,n._)("button",{class:"btn btn-sm btn-outline-dark mb-1",type:"button",onClick:(0,D.iM)((e=>l.configSousInputs(t)),["prevent"])},[ce,(0,n.Uk)(" Parametrage sous champs ")],8,ae),[[D.F8,!t.configSousInputs]])])))),128)),re,(0,n._)("div",ue,[de,(0,n._)("button",{class:"btn btn-secondary",onClick:e[6]||(e[6]=(0,D.iM)(((...t)=>l.closeQuickActionPanel&&l.closeQuickActionPanel(...t)),["prevent"]))},"Fermer")])])],32)])])])])):(0,n.kq)("",!0)])}const me={class:"row"},be={class:"col-md-12"},_e={class:"card p-2 mb-0 mt-1 m-0"},ge=(0,n._)("div",{class:"d-flex justify-content-between align-items-center mb-1"},[(0,n._)("label",{for:"",class:"fw-bold"}," Sous champs :"),(0,n._)("button",{type:"button",class:"btn btn-icon btn-sm btn-danger"},[(0,n._)("i",{class:"icon-trash"})])],-1),fe={class:"input-group mb-2"},he=["onUpdate:modelValue"],ve=["onUpdate:modelValue"],ye=(0,n.uE)('<option value="">Sélectionner </option><option value="text">Zone de texte</option><option value="select">Liste déroulante</option><option value="checkbox">Case à cocher</option><option value="file">Fichier</option><option value="date">Date</option><option value="number">Numéro</option>',7),we=[ye],ke=(0,n._)("button",{type:"button",class:"btn btn-primary btn-icon"},[(0,n._)("i",{class:"flaticon-add"})],-1),xe=[ke],Ce={key:0},Se={class:"input-group mb-2"},De={class:"list-unstyled"},Ie={class:"input-group mb-2"},Me=["onClick"],Ue=(0,n._)("span",{class:"fa fa-plus"},null,-1),Ve={key:0},Fe=(0,n._)("span",{class:"fa fa-save"},null,-1);function je(t,e,o,s,i,l){return(0,n.wg)(),(0,n.iD)("div",me,[(0,n._)("div",be,[(0,n._)("div",_e,[ge,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(i.sousInputs,(t=>((0,n.wg)(),(0,n.iD)("div",{key:t,class:"p-0"},[(0,n._)("div",fe,[(0,n.wy)((0,n._)("input",{type:"text",placeholder:"Détail","onUpdate:modelValue":e=>t.sous_input=e,class:"form-control",required:""},null,8,he),[[D.nr,t.sous_input]]),(0,n.wy)((0,n._)("select",{name:"input_type","onUpdate:modelValue":e=>t.type=e,class:"custom-select form-control",id:"input_type",required:""},we,8,ve),[[D.bM,t.type]]),(0,n.Uk)("* "),(0,n._)("div",{class:"input-group-append",onClick:e[0]||(e[0]=(0,D.iM)(((...t)=>l.addSousInput&&l.addSousInput(...t)),["prevent"]))},xe)]),"select"===t.type||"checkbox"===t.type?((0,n.wg)(),(0,n.iD)("div",Ce,[(0,n._)("div",Se,[(0,n._)("ul",De,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(t.options,((t,e)=>((0,n.wg)(),(0,n.iD)("li",{key:e},"Option "+(0,G.zw)(e+1)+": "+(0,G.zw)(t),1)))),128))])]),(0,n._)("div",Ie,[(0,n._)("button",{onClick:(0,D.iM)((e=>l.addOption(t)),["prevent"]),type:"button",style:{"background-color":"transparent",border:"1px solid black"}},[Ue,(0,n.Uk)(" option")],8,Me)])])):(0,n.kq)("",!0)])))),128)),i.canSave?((0,n.wg)(),(0,n.iD)("div",Ve,[(0,n._)("button",{onClick:e[1]||(e[1]=(0,D.iM)(((...t)=>l.saveSousChamps&&l.saveSousChamps(...t)),["prevent"])),class:"btn btn-success btn-sm mr-2",type:"submit"},[Fe,(0,n.Uk)(" Sauvegarder ")])])):(0,n.kq)("",!0)])])])}var $e={name:"sous-inputs",data(){return{sousInputs:[{sous_input:"",type:"",options:[]}],canSave:!0}},props:{index:Number},methods:{addOption(t){this.$swal({text:"Entrez une option",input:"text",showConfirmButton:!0,showCancelButton:!0,confirmButtonText:"Entrer",cancelButtonText:"Annuler",confirmButtonColor:"green",cancelButtonColor:"red"}).then((e=>{e.isConfirmed&&t.options.push(e.value)}))},addSousInput(){this.sousInputs.push({sous_input:"",type:""})},saveSousChamps(){this.canSave=!1,this.$emit("onsave",this.sousInputs,this.index)}}};const Le=(0,W.Z)($e,[["render",je]]);var Oe=Le,qe={name:"Create-Forms-Page",components:{sousInputs:Oe},data(){return{form:{titre:"",sujet_id:"",sections:[]},selectedSectionIndex:null,selectedContentIndex:null,options:[],formLoading:!1,test:"Hello",op:null}},computed:{sujets(){return this.$store.getters.GET_SUJETS}},created(){this.cleanForm("")},methods:{saveSousInputs(t,e){var o=this.form.sections[this.selectedSectionIndex].contents[this.selectedContentIndex].options[e];o.sousInputs=t},configSousInputs(t,e=!0){t.configSousInputs=e},async onChangeValue({sectionIndex:t,contentIndex:e,value:o}){console.log(o,t,e),(o.includes("checkbox")||o.includes("select"))&&(this.selectedContentIndex=e,this.selectedSectionIndex=t,this.$nextTick((async()=>{await this.addOptions(),await this.openQuickPanelAction()})))},addNewSection(){this.form.sections.push({section:"",contents:[{input:"",input_type:"",options:[]}]})},async addOptions(){let t=this.selectedSectionIndex,e=this.selectedContentIndex;this.form.sections[t].contents[e].options.push({input_option:""})},async openQuickPanelAction(){$("html").addClass("quick_sidebar_open")},closeQuickActionPanel(){$("html").removeClass("quick_sidebar_open"),this.selectedContentIndex=null,this.selectedSectionIndex=null},submitForm(t){this.$validForm("form-formulaires",t,(async(e,o)=>{e?(this.formLoading=!0,K.Z.configurerFormulaire(this.form,(async e=>{this.formLoading=!1,this.cleanForm(t),Swal.fire({title:"Succès !",text:"Formulaire créé avec succès !",icon:"success",timer:4e3,showCancelButton:!1,showConfirmButton:!1}),await this.$store.dispatch("dantic/voirFormulaires")}))):this.$animatedFailedTask("forms-submit-btn")}))},submitFormOptions(t){this.closeQuickActionPanel()},cleanForm(t){this.form.titre="",this.form.sujet_id="",this.form.sections=[],this.addNewSection()}}};const Be=(0,W.Z)(qe,[["render",pe]]);var Ee=Be;const Te=t=>((0,n.dD)("data-v-72b8cc31"),t=t(),(0,n.Cn)(),t),Ne={class:"tab-pane fade",id:"v-pills-forms",role:"tabpanel","aria-labelledby":"v-pills-buy-tab-icons"},Pe={class:"p-2"},He={class:"d-flex align-items-center mb-2"},Ye=Te((()=>(0,n._)("h3",{class:"fw-extrabold"},"Liste des Formulaires ",-1))),Ze=Te((()=>(0,n._)("i",{class:"flaticon-add mr-2"},null,-1))),Ae={class:"input-group m-0 mb-2"},Ke=Te((()=>(0,n._)("div",{class:"input-group-append"},[(0,n._)("span",{class:"input-group-text"},[(0,n._)("i",{class:"fa fa-search search-icon"})])],-1))),ze={class:"list-group list-group-bordered"},We=Te((()=>(0,n._)("i",{class:"flaticon-interface-6 text-info mr-1"},null,-1))),Qe={class:"d-flex"},Re=["onSubmit"],Ge={class:"input-group mb-2"},Je=["onUpdate:modelValue"],Xe={class:"d-flex justify-content-between"},to=["disabled"],eo={key:0,class:"fa fa-spinner fa-spin mr-2"},oo=Te((()=>(0,n._)("button",{class:"btn btn-icon btn-info mr-1",type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},[(0,n._)("i",{class:"icon-information"})],-1))),no=["disabled","onClick"],so={key:0,class:"fa fa-spinner fa-spin"},io={key:1,class:"icon-trash"},lo={class:"dropdown-menu",role:"menu","x-placement":"right-start",style:{position:"absolute",transform:"translate3d(119px, 0px, 0px)",top:"0px",left:"0px","will-change":"transform"}},ao=Te((()=>(0,n._)("h6",{class:"dropdown-header fw-extrabold text-primary"}," Formulaire sections ",-1))),co=Te((()=>(0,n._)("div",{class:"dropdown-divider"},null,-1))),ro=["onClick"],uo=Te((()=>(0,n._)("i",{class:"fas fa-edit text-info"},null,-1))),po=Te((()=>(0,n._)("div",{class:"dropdown-divider"},null,-1))),mo={class:"text-center"},bo=["onClick"],_o=Te((()=>(0,n._)("i",{class:"flaticon-add"},null,-1))),go=Te((()=>(0,n._)("button",{class:"btn btn-icon btn-sm btn-primary btn-rounded"},[(0,n._)("i",{class:"text-primary"})],-1))),fo={class:"row m-0"},ho={class:"col-md-12"},vo={class:"mb-1"},yo=Te((()=>(0,n._)("label",{class:"fw-bold mb-1"},[(0,n.Uk)("Section titre "),(0,n._)("sup",{class:"text-danger"},"*")],-1))),wo={class:"col-md-12"},ko=Te((()=>(0,n._)("label",{class:"fw-bold mb-1"},[(0,n.Uk)("Section contenus/Champs "),(0,n._)("sup",{class:"text-danger"},"*")],-1))),xo={class:"input-group"},Co=["onUpdate:modelValue"],So=["onChange","onUpdate:modelValue"],Do=Te((()=>(0,n._)("option",{value:""},"Sélectionner un type de champs",-1))),Io=Te((()=>(0,n._)("option",{value:"text"},"Zone de texte",-1))),Mo=Te((()=>(0,n._)("option",{value:"select"},"Liste déroulante",-1))),Uo=Te((()=>(0,n._)("option",{value:"checkbox"},"Case à cocher",-1))),Vo=Te((()=>(0,n._)("option",{value:"file"},"Fichier",-1))),Fo=Te((()=>(0,n._)("option",{value:"date"},"Date",-1))),jo=Te((()=>(0,n._)("option",{value:"number"},"Numéro",-1))),$o=[Do,Io,Mo,Uo,Vo,Fo,jo],Lo={class:"input-group-append"},Oo=Te((()=>(0,n._)("i",{class:"flaticon-add text-primary"},null,-1))),qo=[Oo],Bo=["onClick"],Eo=Te((()=>(0,n._)("i",{class:"icon-trash text-danger"},null,-1))),To=[Eo],No=["onClick"],Po=Te((()=>(0,n._)("i",{class:"icon-list mr-2"},null,-1))),Ho=["disabled"],Yo={key:0,class:"fa fa-spinner fa-spin"},Zo=Te((()=>(0,n._)("button",{class:"btn btn-danger","data-dismiss":"modal"},"Fermer",-1))),Ao={class:"input-group"},Ko=["onUpdate:modelValue"],zo={class:"input-group-append"},Wo=Te((()=>(0,n._)("i",{class:"flaticon-add text-primary"},null,-1))),Qo=[Wo],Ro=["onClick"],Go=Te((()=>(0,n._)("i",{class:"icon-trash text-danger"},null,-1))),Jo=[Go],Xo={class:"input-group"},tn=["onUpdate:modelValue"],en=["onChange","onUpdate:modelValue"],on=Te((()=>(0,n._)("option",{value:"",selected:""},"Sélectionner un type ",-1))),nn=Te((()=>(0,n._)("option",{value:"text"},"Zone de texte",-1))),sn=Te((()=>(0,n._)("option",{value:"select"},"Liste déroulante",-1))),ln=Te((()=>(0,n._)("option",{value:"checkbox"},"Case à cocher",-1))),an=Te((()=>(0,n._)("option",{value:"file"},"Fichier",-1))),cn=Te((()=>(0,n._)("option",{value:"date"},"Date",-1))),rn=Te((()=>(0,n._)("option",{value:"number"},"Numéro",-1))),un=[on,nn,sn,ln,an,cn,rn],dn={class:"input-group-append",id:"button-addon1"},pn=["onClick"],mn=Te((()=>(0,n._)("i",{class:"flaticon-add text-primary"},null,-1))),bn=[mn],_n=["onClick"],gn=Te((()=>(0,n._)("i",{class:"icon-trash text-danger"},null,-1))),fn=[gn],hn=["onUpdate:modelValue"],vn={class:"input-group-append",id:"button-addon1"},yn=["onClick"],wn=Te((()=>(0,n._)("i",{class:"flaticon-add text-primary"},null,-1))),kn=[wn],xn=["onClick"],Cn=Te((()=>(0,n._)("i",{class:"icon-trash text-danger"},null,-1))),Sn=[Cn],Dn=Te((()=>(0,n._)("button",{type:"submit",class:"btn btn-primary mt-1 mr-2"}," Valider & Fermer ",-1))),In=Te((()=>(0,n._)("button",{type:"submit",class:"btn btn-primary mt-1 mr-2"}," Valider & Fermer ",-1))),Mn=Te((()=>(0,n._)("button",{type:"button","data-dismiss":"modal",class:"btn btn-primary mr-2"},[(0,n._)("i",{class:"flaticon-add"}),(0,n.Uk)(" Valider les options ")],-1)));function Un(t,e,o,s,i,l){const a=(0,n.up)("bs-popover"),c=(0,n.up)("section-loader"),r=(0,n.up)("group-caption"),u=(0,n.up)("bs-modal"),d=(0,n.up)("formulaire-config-modal");return(0,n.wg)(),(0,n.iD)("div",Ne,[(0,n._)("div",Pe,[(0,n._)("div",He,[Ye,(0,n._)("button",{class:"btn ml-auto btn-primary",onClick:e[0]||(e[0]=e=>t.$showBsModal("configModal"))},[Ze,(0,n.Uk)("Nouveau formulaire")])]),(0,n._)("div",Ae,[(0,n.wy)((0,n._)("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=t=>i.searchWord=t),placeholder:"Recherche formulaire...",class:"form-control"},null,512),[[D.nr,i.searchWord]]),Ke]),(0,n.Wm)(c,{loading:i.dataLoading},{default:(0,n.w5)((()=>[(0,n._)("ul",ze,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(l.formulaires,((o,s)=>((0,n.wg)(),(0,n.iD)("li",{class:"list-group-item d-lg-flex align-items-center justify-content-between",key:s},[(0,n._)("span",null,[We,(0,n.Uk)(" "+(0,G.zw)(t.$filters.capitalize(t.$filters.sortLength(o.titre,70,"..."))),1)]),(0,n._)("div",Qe,[(0,n.Wm)(a,{title:"Modifier le titre du formulaire","trigger-class":"popover-title",placement:"right","toggle-class":"btn-icon d-block btn-success mr-1","toggle-icon":"icon-pencil",onOnToggle:e[3]||(e[3]=e=>t.$closeBsPopover("popover-title"))},{content:(0,n.w5)((()=>[(0,n._)("form",{onSubmit:(0,D.iM)((t=>l.updateFormTitre(o)),["prevent"])},[(0,n._)("div",Ge,[(0,n.wy)((0,n._)("input",{type:"text","onUpdate:modelValue":t=>o.titre=t,class:"form-control",placeholder:"Entrer formulaire titre..."},null,8,Je),[[D.nr,o.titre]])]),(0,n._)("div",Xe,[(0,n._)("button",{disabled:i.updateLoading===o.formulaire_id,type:"submit",class:"btn btn-success flex-fill mr-2"},[i.updateLoading===o.formulaire_id?((0,n.wg)(),(0,n.iD)("i",eo)):(0,n.kq)("",!0),(0,n.Uk)("Sauvegarder les modification ")],8,to),(0,n._)("button",{type:"button",class:"btn btn-danger",onClick:e[2]||(e[2]=(0,D.iM)((e=>t.$closeBsPopover("popover-title")),["prevent"]))}," Fermer ")])],40,Re)])),_:2},1024),oo,(0,n._)("button",{disabled:i.deleteLoading===o.formulaire_id,class:"btn btn-icon btn-danger mr-1",onClick:(0,D.iM)((t=>l.deleteFormulaire(o.formulaire_id)),["prevent"])},[i.deleteLoading===o.formulaire_id?((0,n.wg)(),(0,n.iD)("i",so)):((0,n.wg)(),(0,n.iD)("i",io))],8,no),(0,n._)("ul",lo,[ao,co,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.sections,((e,o)=>((0,n.wg)(),(0,n.iD)("li",{key:o},[(0,n._)("a",{class:"dropdown-item d-flex justify-content-between pt-2 pb-2",href:"javascript:void(0)",onClick:(0,D.iM)((t=>l.getSection(e)),["prevent"])},[(0,n._)("span",null,(0,G.zw)(t.$filters.capitalize(e.section)),1),uo],8,ro),po])))),128)),(0,n._)("li",mo,[(0,n._)("a",{href:"javascript:void(0)",onClick:(0,D.iM)((t=>l.addNewSection(o)),["prevent"]),class:"btn btn-sm btn-primary"},[_o,(0,n.Uk)(" Ajouter section")],8,bo)])])])])))),128))])])),_:1},8,["loading"])]),(0,n.Wm)(u,{size:"modal-xl",id:"formulaireEditModal",onSubmit:l.updateSectionFormulaire,title:"Edition formulaire section"},{"body-content":(0,n.w5)((()=>[void 0!==i.selectedSection.section?((0,n.wg)(),(0,n.j4)(r,{key:0,title:"Section "+i.selectedSection.section},{actions:(0,n.w5)((()=>[go])),content:(0,n.w5)((()=>[(0,n._)("div",fo,[(0,n._)("div",ho,[(0,n._)("div",vo,[yo,(0,n.wy)((0,n._)("input",{type:"text",class:"form-control","onUpdate:modelValue":e[4]||(e[4]=t=>i.selectedSection.section=t),placeholder:"Entrer le titre de la section...",required:""},null,512),[[D.nr,i.selectedSection.section]])])]),(0,n._)("div",wo,[(0,n._)("div",null,[ko,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(i.selectedSection.inputs,((t,o)=>((0,n.wg)(),(0,n.iD)("div",{class:"mb-2",key:o},[(0,n._)("div",xo,[(0,n.wy)((0,n._)("input",{type:"text",class:(0,G.C_)([void 0!==t.options&&t.options.length>0?"input-attach-btn":"","form-control"]),placeholder:"Libellé","onUpdate:modelValue":e=>t.input=e,required:""},null,10,Co),[[D.nr,t.input]]),(0,n.wy)((0,n._)("select",{name:"input_type",onChange:e=>l.addOpts(t,o),class:"custom-select form-control",id:"input_type","onUpdate:modelValue":e=>t.input_type=e,required:""},$o,40,So),[[D.bM,t.input_type]]),(0,n._)("div",Lo,[0===o?((0,n.wg)(),(0,n.iD)("button",{key:0,title:"Ajouter un champs",onClick:e[5]||(e[5]=(0,D.iM)((t=>i.selectedSection.inputs.push({input:"",input_type:"",options:[]})),["prevent"])),"data-toggle":"tooltip",class:"btn bg-grey2 btn-icon"},qo)):((0,n.wg)(),(0,n.iD)("button",{key:1,title:"Effacer ce champs",onClick:(0,D.iM)((t=>i.selectedSection.inputs.splice(o,1)),["prevent"]),"data-toggle":"tooltip",class:"btn bg-grey2 btn-icon"},To,8,Bo))])]),void 0!==t.options&&t.options.length>0?((0,n.wg)(),(0,n.iD)("button",{key:0,type:"button",title:"Voir les options",onClick:e=>l.showOpt(t,o),"data-toggle":"tooltip",class:"btn btn-info btn-attach btn-sm"},[Po,(0,n.Uk)(" Voir/ajouter les options ")],8,No)):(0,n.kq)("",!0)])))),128))])])])])),_:1},8,["title"])):(0,n.kq)("",!0)])),"footer-content":(0,n.w5)((()=>[(0,n._)("button",{disabled:i.submitLoading,id:"submit-btn",type:"submit",class:(0,G.C_)(["btn btn-success",i.submitLoading?"disabled":""]),style:{"margin-right":"4px"}},[i.submitLoading?((0,n.wg)(),(0,n.iD)("i",Yo)):(0,n.kq)("",!0),(0,n.Uk)(" Sauvegarder les modifications ")],10,Ho),Zo])),_:1},8,["onSubmit"]),(0,n.Wm)(u,{id:"optionsViewModal",title:"Entrer les options"},(0,n.Nv)({"footer-content":(0,n.w5)((()=>[Mn])),_:2},[i.selectedOptions?{name:"body-content",fn:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(i.selectedOptions,((o,s)=>((0,n.wg)(),(0,n.iD)("div",{key:s},[(0,n._)("div",Ao,[(0,n.wy)((0,n._)("input",{type:"text","onUpdate:modelValue":t=>o.input_option=t,placeholder:"Entrer une option...",class:"form-control input-attach-btn",required:""},null,8,Ko),[[D.nr,o.input_option]]),(0,n._)("div",zo,[0===s?((0,n.wg)(),(0,n.iD)("button",{key:0,class:"btn btn-icon bg-grey2",onClick:e[6]||(e[6]=(0,D.iM)((t=>i.selectedOptions.push({input_option:""})),["prevent"]))},Qo)):((0,n.wg)(),(0,n.iD)("button",{key:1,class:"btn btn-icon bg-grey2",onClick:(0,D.iM)((t=>i.selectedOptions.splice(s,1)),["prevent"])},Jo,8,Ro))])]),(0,n.Wm)(a,{"trigger-class":"pop-sousChamps",placement:"left",title:"Configuration sous champs","toggle-class":"btn btn-info btn-sm btn-attach mb-2","toggle-icon":"flaticon-add","toggle-label":"Voir/ajouter sous champs",onOnToggle:t=>l.onToggleSousOptions(o)},{content:(0,n.w5)((()=>[(0,n._)("form",{onSubmit:e[8]||(e[8]=(0,D.iM)((e=>t.$closeBsPopover("pop-sousChamps")),["prevent"]))},[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.sous_inputs,((s,i)=>((0,n.wg)(),(0,n.iD)("div",{key:i,class:"mb-2"},[(0,n._)("div",Xo,[(0,n.wy)((0,n._)("input",{type:"text","onUpdate:modelValue":t=>s.sous_input=t,class:(0,G.C_)(["form-control",void 0!==s.sous_options&&s.sous_options.length>0?"input-attach-btn":""]),placeholder:"Sous champs libellé",required:""},null,10,tn),[[D.nr,s.sous_input]]),(0,n.wy)((0,n._)("select",{name:"input_type",onChange:t=>l.onChangeSousOption(s),class:"custom-select form-control",id:"input_type","onUpdate:modelValue":t=>s.type=t,required:""},un,40,en),[[D.bM,s.type]]),(0,n._)("div",dn,[0===i?((0,n.wg)(),(0,n.iD)("button",{key:0,class:"btn btn-icon bg-grey2",onClick:(0,D.iM)((t=>o.sous_inputs.push({sous_input:"",type:"text",options:[]})),["prevent"]),type:"button"},bn,8,pn)):((0,n.wg)(),(0,n.iD)("button",{key:1,class:"btn btn-icon bg-grey2",onClick:(0,D.iM)((t=>o.sous_inputs.splice(i,1)),["prevent"]),type:"button"},fn,8,_n))])]),void 0!==s.sous_options&&s.sous_options.length>0?((0,n.wg)(),(0,n.j4)(a,{key:0,title:"Sous options","trigger-class":"pop-sousOptions",placement:"bottom","toggle-class":"btn btn-info btn-sm btn-attach","toggle-icon":"flaticon-add","toggle-label":"Voir/ajouter sous options"},{content:(0,n.w5)((()=>[(0,n._)("form",{onSubmit:e[7]||(e[7]=(0,D.iM)((e=>t.$closeBsPopover("pop-sousOptions")),["prevent"]))},[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(s.sous_options,((t,e)=>((0,n.wg)(),(0,n.iD)("div",{class:"input-group mb-2",key:e},[(0,n.wy)((0,n._)("input",{type:"text","onUpdate:modelValue":e=>t.sous_input_option=e,class:"form-control",placeholder:"Sous option libellé"},null,8,hn),[[D.nr,t.sous_input_option]]),(0,n._)("div",vn,[0===e?((0,n.wg)(),(0,n.iD)("button",{key:0,class:"btn btn-icon bg-grey2",onClick:(0,D.iM)((t=>s.sous_options.push({sous_input_option:""})),["prevent"]),type:"button"},kn,8,yn)):((0,n.wg)(),(0,n.iD)("button",{key:1,class:"btn btn-icon bg-grey2",onClick:(0,D.iM)((t=>s.sous_options.splice(e,1)),["prevent"]),type:"button"},Sn,8,xn))])])))),128)),Dn],32)])),_:2},1024)):(0,n.kq)("",!0)])))),128)),In],32)])),_:2},1032,["onOnToggle"])])))),128))])),key:"0"}:void 0]),1024),(0,n.Wm)(d)])}const Vn=t=>((0,n.dD)("data-v-b8d22bb6"),t=t(),(0,n.Cn)(),t),Fn={style:{"box-shadow":"rgba(0, 0, 0, 0.1) 0px 1px 3px 0px, rgba(0, 0, 0, 0.06) 0px 1px 2px 0px","border-radius":"5px"},class:"p-1 pt-0 mb-2"},jn={class:"row pb-2 px-2"},$n={class:"col-md-6"},Ln=Vn((()=>(0,n._)("label",{class:"fw-bold mb-1"},[(0,n.Uk)("Formulaire titre "),(0,n._)("sup",{class:"text-danger"},"*")],-1))),On={class:"col-md-6"},qn=Vn((()=>(0,n._)("label",{class:"fw-bold mb-1"},[(0,n.Uk)("Sélectionner un sujet"),(0,n._)("sup",{class:"text-danger"},"*")],-1))),Bn=Vn((()=>(0,n._)("option",{value:"",selected:""},"Sélectionner un sujet",-1))),En=["value"],Tn=Vn((()=>(0,n._)("i",{class:"flaticon-add text-primary"},null,-1))),Nn=[Tn],Pn=["onClick"],Hn=Vn((()=>(0,n._)("i",{class:"icon-trash text-danger"},null,-1))),Yn=[Hn],Zn={class:"row m-0"},An={class:"col-md-12"},Kn={class:"mb-1"},zn=Vn((()=>(0,n._)("label",{class:"fw-bold mb-1"},[(0,n.Uk)("Section titre "),(0,n._)("sup",{class:"text-danger"},"*")],-1))),Wn=["onUpdate:modelValue"],Qn={class:"col-md-12"},Rn=Vn((()=>(0,n._)("label",{class:"fw-bold mb-1"},[(0,n.Uk)("Section contenus/Champs "),(0,n._)("sup",{class:"text-danger"},"*")],-1))),Gn={class:"input-group"},Jn=["onUpdate:modelValue"],Xn=["onChange","onUpdate:modelValue"],ts=Vn((()=>(0,n._)("option",{value:""},"Sélectionner un type de champs",-1))),es=Vn((()=>(0,n._)("option",{value:"text"},"Zone de texte",-1))),os=Vn((()=>(0,n._)("option",{value:"select"},"Liste déroulante",-1))),ns=Vn((()=>(0,n._)("option",{value:"checkbox"},"Case à cocher",-1))),ss=Vn((()=>(0,n._)("option",{value:"file"},"Fichier",-1))),is=Vn((()=>(0,n._)("option",{value:"date"},"Date",-1))),ls=Vn((()=>(0,n._)("option",{value:"number"},"Numéro",-1))),as=[ts,es,os,ns,ss,is,ls],cs={class:"input-group-append"},rs=["onClick"],us=Vn((()=>(0,n._)("i",{class:"flaticon-add text-primary"},null,-1))),ds=[us],ps=["onClick"],ms=Vn((()=>(0,n._)("i",{class:"icon-trash text-danger"},null,-1))),bs=[ms],_s=["onClick"],gs=Vn((()=>(0,n._)("i",{class:"icon-list mr-2"},null,-1))),fs=["disabled"],hs={key:0,class:"fa fa-spinner fa-spin mr-2"},vs={class:"input-group"},ys=["onUpdate:modelValue"],ws={class:"input-group-append"},ks=Vn((()=>(0,n._)("i",{class:"flaticon-add text-primary"},null,-1))),xs=[ks],Cs=["onClick"],Ss=Vn((()=>(0,n._)("i",{class:"icon-trash text-danger"},null,-1))),Ds=[Ss],Is={class:"input-group"},Ms=["onUpdate:modelValue"],Us=["onChange","onUpdate:modelValue"],Vs=Vn((()=>(0,n._)("option",{value:"",selected:""},"Sélectionner un type ",-1))),Fs=Vn((()=>(0,n._)("option",{value:"text"},"Zone de texte",-1))),js=Vn((()=>(0,n._)("option",{value:"select"},"Liste déroulante",-1))),$s=Vn((()=>(0,n._)("option",{value:"checkbox"},"Case à cocher",-1))),Ls=Vn((()=>(0,n._)("option",{value:"file"},"Fichier",-1))),Os=Vn((()=>(0,n._)("option",{value:"date"},"Date",-1))),qs=Vn((()=>(0,n._)("option",{value:"number"},"Numéro",-1))),Bs=[Vs,Fs,js,$s,Ls,Os,qs],Es={class:"input-group-append",id:"button-addon1"},Ts=["onClick"],Ns=Vn((()=>(0,n._)("i",{class:"flaticon-add text-primary"},null,-1))),Ps=[Ns],Hs=["onClick"],Ys=Vn((()=>(0,n._)("i",{class:"icon-trash text-danger"},null,-1))),Zs=[Ys],As=["onUpdate:modelValue"],Ks={class:"input-group-append",id:"button-addon1"},zs=["onClick"],Ws=Vn((()=>(0,n._)("i",{class:"flaticon-add text-primary"},null,-1))),Qs=[Ws],Rs=["onClick"],Gs=Vn((()=>(0,n._)("i",{class:"icon-trash text-danger"},null,-1))),Js=[Gs],Xs=Vn((()=>(0,n._)("button",{type:"submit",class:"btn btn-primary mt-1 mr-2"}," Valider & Fermer ",-1))),ti={class:"d-flex justify-content-between mb-2"},ei=Vn((()=>(0,n._)("button",{type:"submit",class:"btn btn-primary mt-1 mr-2 flex-fill text-uppercase"}," Valider & sauvegarder",-1))),oi=["onClick"],ni=Vn((()=>(0,n._)("button",{type:"button","data-dismiss":"modal",class:"btn btn-primary mr-2"},[(0,n._)("i",{class:"flaticon-add"}),(0,n.Uk)(" Valider les options ")],-1)));function si(t,e,o,s,i,l){const a=(0,n.up)("group-caption"),c=(0,n.up)("bs-modal"),r=(0,n.up)("bs-popover");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.Wm)(c,{onSubmit:l.submitForm,title:" Configuration formulaire",id:"configModal",size:"modal-xl"},{"body-content":(0,n.w5)((()=>[(0,n._)("fieldset",Fn,[(0,n._)("div",jn,[(0,n._)("div",$n,[(0,n._)("div",null,[Ln,(0,n.wy)((0,n._)("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>i.form.titre=t),placeholder:"Entrer le titre du formulaire...",class:"form-control",required:""},null,512),[[D.nr,i.form.titre]])])]),(0,n._)("div",On,[(0,n._)("div",null,[qn,(0,n.wy)((0,n._)("select",{"onUpdate:modelValue":e[1]||(e[1]=t=>i.form.sujet_id=t),class:"form-control custom-select",id:"defaultSelect",required:""},[Bn,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(l.sujets,(t=>((0,n.wg)(),(0,n.iD)("option",{key:t.sujet_id,value:t.sujet_id},(0,G.zw)(t.sujet),9,En)))),128))],512),[[D.bM,i.form.sujet_id]])])])])]),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(i.form.sections,((t,o)=>((0,n.wg)(),(0,n.j4)(a,{title:"Section "+(o+1),key:o},{actions:(0,n.w5)((()=>[0===o?((0,n.wg)(),(0,n.iD)("button",{key:0,class:"btn btn-icon btn-sm btn-light btn-rounded",onClick:e[2]||(e[2]=(0,D.iM)(((...t)=>l.addNewSection&&l.addNewSection(...t)),["prevent"]))},Nn)):((0,n.wg)(),(0,n.iD)("button",{key:1,class:"btn btn-icon btn-sm btn-light btn-rounded",onClick:(0,D.iM)((t=>i.form.sections.splice(o,1)),["prevent"])},Yn,8,Pn))])),content:(0,n.w5)((()=>[(0,n._)("div",Zn,[(0,n._)("div",An,[(0,n._)("div",Kn,[zn,(0,n.wy)((0,n._)("input",{type:"text",class:"form-control","onUpdate:modelValue":e=>t.section=e,placeholder:"Entrer le titre de la section...",required:""},null,8,Wn),[[D.nr,t.section]])])]),(0,n._)("div",Qn,[(0,n._)("div",null,[Rn,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(t.inputs,((e,s)=>((0,n.wg)(),(0,n.iD)("div",{class:"mb-2",key:s},[(0,n._)("div",Gn,[(0,n.wy)((0,n._)("input",{type:"text",placeholder:"Libellé","onUpdate:modelValue":t=>e.input=t,class:(0,G.C_)(["form-control",void 0!==e.options&&e.options.length>0?"input-attach-btn":""]),required:""},null,10,Jn),[[D.nr,e.input]]),(0,n.wy)((0,n._)("select",{name:"input_type",onChange:t=>l.onChangeValue({sectionIndex:o,contentIndex:s,value:e.input_type}),class:"custom-select form-control",id:"input_type","onUpdate:modelValue":t=>e.input_type=t,required:""},as,40,Xn),[[D.bM,e.input_type]]),(0,n._)("div",cs,[0===s?((0,n.wg)(),(0,n.iD)("button",{key:0,title:"Ajouter un champs",onClick:(0,D.iM)((e=>t.inputs.push({input:"",input_type:"",options:[]})),["prevent"]),"data-toggle":"tooltip",class:"btn bg-grey2 btn-icon"},ds,8,rs)):((0,n.wg)(),(0,n.iD)("button",{key:1,title:"Effacer ce champs",onClick:(0,D.iM)((e=>t.inputs.splice(s,1)),["prevent"]),"data-toggle":"tooltip",class:"btn bg-grey2 btn-icon"},bs,8,ps))])]),void 0!==e.options&&e.options.length>0?((0,n.wg)(),(0,n.iD)("button",{key:0,type:"button",title:"Voir les options",onClick:t=>l.onChangeValue({sectionIndex:o,contentIndex:s,value:e.input_type,trigger:"click"}),"data-toggle":"tooltip",class:"btn btn-info btn-attach btn-sm"},[gs,(0,n.Uk)(" Voir/ajouter les options ")],8,_s)):(0,n.kq)("",!0)])))),128))])])])])),_:2},1032,["title"])))),128))])),"footer-content":(0,n.w5)((()=>[(0,n._)("button",{type:"submit",disabled:i.formLoading,id:"forms-submit-btn",class:"btn btn-success mr-1"},[i.formLoading?((0,n.wg)(),(0,n.iD)("i",hs)):(0,n.kq)("",!0),(0,n.Uk)("Soumettre la configuration")],8,fs),(0,n._)("button",{type:"button",class:"btn btn-danger","data-dismiss":"modal",onClick:e[3]||(e[3]=(0,D.iM)(((...t)=>l.cleanField&&l.cleanField(...t)),["prevent"]))},"Fermer")])),_:1},8,["onSubmit"]),null!==i.selectedContentIndex&&null!==i.selectedSectionIndex?((0,n.wg)(),(0,n.j4)(c,{key:0,id:"optionsModal",title:"Entrer les options"},{"body-content":(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(i.form.sections[i.selectedSectionIndex].inputs[i.selectedContentIndex].options,((o,s)=>((0,n.wg)(),(0,n.iD)("div",{key:s},[(0,n._)("div",vs,[(0,n.wy)((0,n._)("input",{type:"text","onUpdate:modelValue":t=>o.input_option=t,placeholder:"Entrer une option...",class:"form-control input-attach-btn",required:""},null,8,ys),[[D.nr,o.input_option]]),(0,n._)("div",ws,[0===s?((0,n.wg)(),(0,n.iD)("button",{key:0,class:"btn btn-icon bg-grey2",onClick:e[4]||(e[4]=(0,D.iM)((t=>i.form.sections[i.selectedSectionIndex].inputs[i.selectedContentIndex].options.push({input_option:""})),["prevent"]))},xs)):((0,n.wg)(),(0,n.iD)("button",{key:1,class:"btn btn-icon bg-grey2",onClick:(0,D.iM)((t=>i.form.sections[i.selectedSectionIndex].inputs[i.selectedContentIndex].options.splice(s,1)),["prevent"])},Ds,8,Cs))])]),(0,n.Wm)(r,{title:"Configuration sous champs","trigger-class":"p-sousChamps",placement:"left","toggle-class":"btn-outline-dark btn-sm btn-attach mb-2","toggle-icon":"flaticon-add","toggle-label":"Ajouter sous champs (optionnel)",onOnToggle:t=>l.addSousOptions(s)},{content:(0,n.w5)((()=>[(0,n._)("form",{onSubmit:e[6]||(e[6]=(0,D.iM)((e=>t.$closeBsPopover("p-sousChamps")),["prevent"]))},[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.sous_inputs,((s,i)=>((0,n.wg)(),(0,n.iD)("div",{class:"mb-2",key:i},[(0,n._)("div",Is,[(0,n.wy)((0,n._)("input",{type:"text","onUpdate:modelValue":t=>s.sous_input=t,class:(0,G.C_)(["form-control",void 0!==s.sous_options&&s.sous_options.length>0?"input-attach-btn":""]),placeholder:"Sous champs libellé",required:""},null,10,Ms),[[D.nr,s.sous_input]]),(0,n.wy)((0,n._)("select",{name:"input_type",onChange:t=>l.onChangeSousOption(s,i),class:"custom-select form-control",id:"input_type","onUpdate:modelValue":t=>s.type=t,required:""},Bs,40,Us),[[D.bM,s.type]]),(0,n._)("div",Es,[0===i?((0,n.wg)(),(0,n.iD)("button",{key:0,class:"btn btn-icon bg-grey2",onClick:(0,D.iM)((t=>o.sous_inputs.push({sous_input:"",type:"",options:[]})),["prevent"]),type:"button"},Ps,8,Ts)):((0,n.wg)(),(0,n.iD)("button",{key:1,class:"btn btn-icon bg-grey2",onClick:(0,D.iM)((t=>o.sous_inputs.splice(i,1)),["prevent"]),type:"button"},Zs,8,Hs))])]),void 0!==s.sous_options&&s.sous_options.length>0?((0,n.wg)(),(0,n.j4)(r,{key:0,title:"Configuration sous options","trigger-class":"p-sousOptions",placement:"bottom","toggle-class":"btn-dark btn-attach btn-sm mb-2","toggle-icon":"flaticon-add","toggle-label":"Ajouter sous options"},{content:(0,n.w5)((()=>[(0,n._)("form",{onSubmit:e[5]||(e[5]=(0,D.iM)((e=>t.$closeBsPopover("p-sousOptions")),["prevent"]))},[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(s.sous_options,((t,e)=>((0,n.wg)(),(0,n.iD)("div",{class:"input-group mb-2",key:e},[(0,n.wy)((0,n._)("input",{type:"text","onUpdate:modelValue":e=>t.sous_input_option=e,class:"form-control",placeholder:"Sous champs libellé"},null,8,As),[[D.nr,t.sous_input_option]]),(0,n._)("div",Ks,[0===e?((0,n.wg)(),(0,n.iD)("button",{key:0,class:"btn btn-icon bg-grey2",onClick:(0,D.iM)((t=>s.sous_options.push({sous_input_option:""})),["prevent"]),type:"button"},Qs,8,zs)):((0,n.wg)(),(0,n.iD)("button",{key:1,class:"btn btn-icon bg-grey2",onClick:(0,D.iM)((t=>s.sous_options.splice(e,1)),["prevent"]),type:"button"},Js,8,Rs))])])))),128)),Xs],32)])),_:2},1024)):(0,n.kq)("",!0)])))),128)),(0,n._)("div",ti,[ei,(0,n._)("button",{class:"btn btn-dark text-uppercase mt-1",onClick:(0,D.iM)((t=>l.closePopover(s)),["prevent"])},"Annuler",8,oi)])],32)])),_:2},1032,["onOnToggle"])])))),128))])),"footer-content":(0,n.w5)((()=>[ni])),_:1})):(0,n.kq)("",!0)],64)}var ii={name:"FormulaireCongigModal",data(){return{form:{titre:"",sujet_id:"",sections:[]},selectedSectionIndex:null,selectedContentIndex:null,sousInputIndex:null,formLoading:!1}},mounted(){this.addNewSection(),this.$initBsTooltip()},methods:{onChangeValue({sectionIndex:t,contentIndex:e,value:o,trigger:n=null}){if(null!==n)return this.selectedContentIndex=e,this.selectedSectionIndex=t,void this.$nextTick((async()=>{$("#optionsModal").modal("show")}));if(o.includes("checkbox")||o.includes("select"))this.selectedContentIndex=e,this.selectedSectionIndex=t,this.$nextTick((async()=>{await this.addOptions(),$("#optionsModal").modal("show")}));else{let t=this.selectedSectionIndex,e=this.selectedContentIndex;this.form.sections[t].inputs[e].options=[]}},onChangeSousOption(t,e){t.type.includes("checkbox")||t.type.includes("select")?(t.sous_options=[],t.sous_options.push({sous_input_option:""})):t.sous_options=[]},addNewSection(){this.form.sections.push({section:"",inputs:[{input:"",input_type:"",options:[]}]})},async addOptions(){let t=this.selectedSectionIndex,e=this.selectedContentIndex;0===this.form.sections[t].inputs[e].options.length&&this.form.sections[t].inputs[e].options.push({input_option:""})},addSousOptions(t){let e=this.form.sections[this.selectedSectionIndex].inputs[this.selectedContentIndex].options[t];void 0===e.sous_inputs?(e.sous_inputs=[],this.$nextTick((()=>{e.sous_inputs.push({sous_input:"",type:"",sous_options:[]})}))):0===e.sous_inputs.length&&e.sous_inputs.push({sous_input:"",type:"",sous_options:[]})},submitForm(t){this.formLoading=!0,console.log(JSON.stringify(this.form)),K.Z.configurerFormulaire(this.form,(async t=>{this.formLoading=!1,Swal.fire({title:"Succès !",text:"Formulaire créé avec succès !",icon:"success",timer:4e3,showCancelButton:!1,showConfirmButton:!1}),await this.$store.dispatch("dantic/voirFormulaires"),this.cleanField()}))},closePopover(t){this.$closeBsPopover("p-sousChamps");let e=this.form.sections[this.selectedSectionIndex].inputs[this.selectedContentIndex].options[t];e.sous_inputs=[]},closeOptionsModal(){this.$closeBsModal("optionsModal")},cleanField(){$("#configModal").modal("hide"),this.form={titre:"",sujet_id:"",sections:[]},this.$store.dispatch("dantic/getSection",null),this.addNewSection()}},computed:{sujets(){return this.$store.getters.GET_SUJETS}}};const li=(0,W.Z)(ii,[["render",si],["__scopeId","data-v-b8d22bb6"]]);var ai=li,ci={name:"Formulaires-View-Page",components:{formulaireConfigModal:ai},data(){return{searchWord:"",selectedSection:{},deleteLoading:"",dataLoading:!1,updateLoading:"",isNew:!1,submitLoading:!1,selectedOptions:[],optionIndex:null,timer:null}},mounted(){this.dataLoading=!0,this.$store.dispatch("dantic/voirFormulaires").then((()=>this.dataLoading=!1)).catch((t=>this.dataLoading=!1))},computed:{formulaires(){if(this.searchWord){let t=this.$store.getters["dantic/GET_FORMULAIRES"];return t.filter((t=>t.titre.toLowerCase().includes(this.searchWord.toLowerCase())))}return this.$store.getters["dantic/GET_FORMULAIRES"]}},methods:{updateFormTitre(t){var e={formulaire_id:t.formulaire_id,titre:t.titre};this.updateLoading=t.formulaire_id,K.Z.editFormTitre(e).then((t=>{this.updateLoading="",this.$closeBsPopover("popover-title")}))},addNewSection(t){this.isNew=!1,this.selectedSection={section:"",formulaire_id:t.formulaire_id,inputs:[{input:"",input_type:"",options:[]}]},this.$nextTick((()=>{$("#formulaireEditModal").modal("show")}))},addOpts(t,e){t.input_type.includes("select")||t.input_type.includes("checkbox")?(t.options=[],t.options.push({input_option:""}),this.optionIndex=e,this.$nextTick((()=>{this.showOpt(t,e)}))):t.options=[]},onChangeSousOption(t){t.type.includes("checkbox")||t.type.includes("select")?(void 0===t.sous_options&&(t.sous_options=[]),t.sous_options.push({sous_input_option:""})):t.sous_options=[]},onToggleSousOptions(t){void 0!==t.sous_inputs&&0!==t.sous_inputs.length||(t.sous_inputs=[],t.sous_inputs.push({sous_input:""}))},showOpt(t,e){this.optionIndex=e,this.selectedOptions=t.options,this.$nextTick((()=>{$("#optionsViewModal").modal("show")}))},getSection(t){this.selectedSection=t,this.$nextTick((()=>{$("#formulaireEditModal").modal("show")}))},updateSectionFormulaire(t){Swal.fire({title:"Etes-vous sûr ?",text:"Voulez vous vraiment effecteur ces modifications sur cette section ?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#31ce36",cancelButtonColor:"#f25961",confirmButtonText:"Oui, modifier",cancelButtonText:"Non, fermer"}).then((async t=>{if(t.isConfirmed){if(this.submitLoading=!0,void 0===this.selectedSection.formulaire_section_id){let{formulaire_section_id:t}=await K.Z.creerSectionFormulaire(this.selectedSection);if(null!==t){for(let e=0;e<this.selectedSection.inputs.length;e++){let o=this.selectedSection.inputs[e];o.formulaire_section_id=t,await K.Z.creerFormulaireSectionDetails(o)}this.submitLoading=!1,this.$store.dispatch("dantic/voirFormulaires"),Swal.fire({title:"Success",text:"Nouvelles section ajoutée avec succès !",icon:"success",showCancelButton:!1,showConfirmButton:!1,timer:3e3}),$("#formulaireEditModal").modal("hide")}return}K.Z.modifierSectionFormulaire(this.selectedSection).then((t=>{this.submitLoading=!1,console.log(t),t&&(this.$store.dispatch("dantic/voirFormulaires"),Swal.fire({title:"Success",text:"Les modifications ont été effectuées avec succès !",icon:"success",showCancelButton:!1,showConfirmButton:!1,timer:3e3}),$("#formulaireEditModal").modal("hide"))}))}}))},deleteFormulaire(t){Swal.fire({title:"Etes-vous sûr ?",text:"Voulez vous supprimer définitivement ce formulaire ?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#31ce36",cancelButtonColor:"#f25961",confirmButtonText:"Oui, supprimer",cancelButtonText:"Non, fermer"}).then((e=>{e.isConfirmed&&(this.deleteLoading=t,K.Z.supprimerFormulaire(t,(t=>{this.deleteLoading=!1,t&&(this.$store.dispatch("dantic/voirFormulaires"),Swal.fire({title:"Success",text:"Formulaire supprimé avec succès !",icon:"success",showCancelButton:!1,showConfirmButton:!1,timer:3e3}))})))}))}}};const ri=(0,W.Z)(ci,[["render",Un],["__scopeId","data-v-72b8cc31"]]);var ui=ri,di={components:{topicTab:R,formCreateTab:Ee,formsView:ui},mounted(){this.$store.dispatch("voirSujets")}};const pi=(0,W.Z)(di,[["render",S]]);var mi=pi}}]);
//# sourceMappingURL=283.57db9855.js.map