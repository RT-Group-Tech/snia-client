"use strict";(self["webpackChunksnia"]=self["webpackChunksnia"]||[]).push([[973],{7973:function(e,t,a){a.r(t),a.d(t,{default:function(){return qe}});var l=a(6252);const s={class:"main-panel"},i={class:"container"},r={class:"panel-header"},o={class:"page-inner py-5"},n={class:"page-header"},c=(0,l._)("h4",{class:"page-title"},"Cultures",-1),d={class:"breadcrumbs"},u={class:"nav-home"},m=(0,l._)("i",{class:"flaticon-home"},null,-1),p={class:"page-inner mt--5"},g={class:"row"},f={class:"col-md-12"},b={class:"card"},_=(0,l._)("div",{class:"card-header"},[(0,l._)("h4",{class:"card-title fw-bold"},"Menu Culture")],-1),v={class:"card-body"},h={class:"row"},w=(0,l._)("div",{class:"col-12 col-md-3"},[(0,l._)("div",{class:"nav flex-column nav-pills nav-info nav-pills-no-bd nav-pills-icons",id:"v-pills-tab",role:"tablist","aria-orientation":"vertical"},[(0,l._)("a",{class:"nav-link active show",id:"v-pills-home-tab-icons","data-toggle":"pill",href:"#v-pills-categories",role:"tab","aria-controls":"v-pills-categories","aria-selected":"true"},[(0,l._)("i",{class:"flaticon-add"}),(0,l.Uk)(" Création catégories ")]),(0,l._)("a",{class:"nav-link",id:"v-pills-profile-tab-icons","data-toggle":"pill",href:"#v-pills-cultures",role:"tab","aria-controls":"v-pills-cultures","aria-selected":"false"},[(0,l._)("i",{class:"flaticon-add"}),(0,l.Uk)(" Voir & Créer cultures ")])])],-1),C={class:"col-12 col-md-9"},y={class:"tab-content",id:"v-pills-tabContent"};function k(e,t,a,k,L,D){const S=(0,l.up)("router-link"),x=(0,l.up)("categorie-tab"),U=(0,l.up)("culture-tab");return(0,l.wg)(),(0,l.iD)("div",s,[(0,l._)("div",i,[(0,l._)("div",r,[(0,l._)("div",o,[(0,l._)("div",n,[c,(0,l._)("ul",d,[(0,l._)("li",u,[(0,l.Wm)(S,{to:{name:"dashboard-route"}},{default:(0,l.w5)((()=>[m])),_:1})])])])])]),(0,l._)("div",p,[(0,l._)("div",g,[(0,l._)("div",f,[(0,l._)("div",b,[_,(0,l._)("div",v,[(0,l._)("div",h,[w,(0,l._)("div",C,[(0,l._)("div",y,[(0,l.Wm)(x),(0,l.Wm)(U)])])])])])])])])])])}a(7658);var L=a(9963);const D={class:"tab-pane fade active show",id:"v-pills-categories",role:"tabpanel","aria-labelledby":"v-pills-home-tab-icons"},S={class:"accordion accordion-secondary"},x={class:"card"},U=(0,l._)("div",{class:"card-header","aria-expanded":"true","aria-controls":"collapseOne",role:"button"},[(0,l._)("div",{class:"span-title text-uppercase fw-extrabold"}," Création catégories ")],-1),F={class:"card-body p-0"},M={class:"form-group"},V=(0,l._)("label",{for:"to",class:"col-form-label mb-2"},"Catégorie",-1),W=["onUpdate:modelValue"],E={class:"input-group-append"},T=(0,l._)("i",{class:"flaticon-add"},null,-1),q=[T],z=["onClick"],Z=(0,l._)("i",{class:"icon-trash"},null,-1),G=[Z],H={class:"card-footer"},N=["disabled"],O={key:0,class:"fa fa-spinner fa-spin mr-2"},R=(0,l._)("button",{type:"reset",class:"btn btn-danger"},"Annuler",-1);function Y(e,t,a,s,i,r){return(0,l.wg)(),(0,l.iD)("div",D,[(0,l._)("form",{onSubmit:t[1]||(t[1]=(0,L.iM)(((...e)=>r.submitForm&&r.submitForm(...e)),["prevent"])),id:"form-categorie"},[(0,l._)("div",S,[(0,l._)("div",x,[U,(0,l._)("div",F,[(0,l._)("div",M,[V,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(i.forms,((e,a)=>((0,l.wg)(),(0,l.iD)("div",{class:"input-group mb-2",key:a},[(0,l.wy)((0,l._)("input",{type:"text","onUpdate:modelValue":t=>e.categorie=t,placeholder:"Entrer une catégorie...",class:"form-control",required:""},null,8,W),[[L.nr,e.categorie]]),(0,l._)("div",E,[a===i.forms.length-1?((0,l.wg)(),(0,l.iD)("button",{key:0,onClick:t[0]||(t[0]=(0,L.iM)((e=>i.forms.push({categorie:""})),["prevent"])),class:"btn btn-primary btn-icon",type:"submit"},q)):((0,l.wg)(),(0,l.iD)("button",{key:1,onClick:(0,L.iM)((e=>i.forms.splice(a,1)),["prevent"]),class:"btn btn-dark btn-icon"},G,8,z))])])))),128))])]),(0,l._)("div",H,[(0,l._)("button",{type:"submit",disabled:i.formLoading,class:"btn btn-success mr-2"},[i.formLoading?((0,l.wg)(),(0,l.iD)("i",O)):(0,l.kq)("",!0),(0,l.Uk)("Sauvegarder")],8,N),R])])])],32)])}var K=a(243),j={name:"Create-Categorie",data(){return{forms:[],formLoading:!1}},created(){this.forms.push({categorie:""})},methods:{submitForm(e){this.$validForm("form-categorie",e,(async(e,t)=>{if(e){this.formLoading=!0;for(let e=0;e<this.forms.length;e++)await K.Z.creerCategorie(this.forms[e],(e=>{console.log(JSON.stringify(e))}));this.cleanForm(),this.formLoading=!1,$.notify({icon:"fas fa-check",title:"Succès !",message:"Création des catégories effectués avec succès !"},{type:"success",placement:{from:"bottom",align:"right"},time:1e3})}else this.$animatedFailedTask("submit-btn")}))},cleanForm(){for(let e=0;e<this.forms.length;e++)this.forms[e].categorie=""}}},A=a(3744);const B=(0,A.Z)(j,[["render",Y]]);var J=B,I=a(3577);const P={class:"tab-pane fade",id:"v-pills-cultures",role:"tabpanel","aria-labelledby":"v-pills-home-tab-icons"},Q={class:"p-2"},X={class:"d-flex align-items-center mb-2"},ee=(0,l._)("h3",{class:"fw-extrabold"},"Liste des Cultures ",-1),te=(0,l._)("i",{class:"flaticon-add mr-2"},null,-1),ae={class:"input-group m-0 mb-2"},le=(0,l._)("div",{class:"input-group-append"},[(0,l._)("span",{class:"input-group-text"},[(0,l._)("i",{class:"fa fa-search search-icon"})])],-1),se={class:"list-group list-group-bordered"},ie={class:"d-flex"},re=["disabled","onClick"],oe={key:0,class:"fa fa-spinner fa-spin"},ne={key:1,class:"icon-trash"};function ce(e,t,a,s,i,r){const o=(0,l.up)("section-loader"),n=(0,l.up)("create-culture-modal");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("div",P,[(0,l._)("div",Q,[(0,l._)("div",X,[ee,(0,l._)("button",{class:"btn ml-auto btn-primary",onClick:t[0]||(t[0]=t=>e.$showBsModal("cultureCreateModal"))},[te,(0,l.Uk)("Nouvelles cultures")])]),(0,l._)("div",ae,[(0,l.wy)((0,l._)("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>i.searchWord=e),placeholder:"Recherche culture...",class:"form-control"},null,512),[[L.nr,i.searchWord]]),le]),(0,l.Wm)(o,{loading:i.dataLoading,data:r.cultures},{default:(0,l.w5)((()=>[(0,l._)("ul",se,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(r.cultures,((t,a)=>((0,l.wg)(),(0,l.iD)("li",{class:"list-group-item d-lg-flex align-items-center justify-content-between",key:a},[(0,l._)("span",null,(0,I.zw)(e.$filters.capitalize(t.nom)),1),(0,l._)("div",ie,[(0,l._)("button",{disabled:i.deleteLoading===t.culture_id,class:"btn btn-icon btn-danger mr-1",onClick:(0,L.iM)((e=>r.deleteCulture(t.culture_id)),["prevent"])},[i.deleteLoading===t.culture_id?((0,l.wg)(),(0,l.iD)("i",oe)):((0,l.wg)(),(0,l.iD)("i",ne))],8,re)])])))),128))])])),_:1},8,["loading","data"])])]),(0,l.Wm)(n)],64)}const de={class:"row"},ue={class:"col-md-12 col-12"},me=(0,l._)("label",{class:"mb-3"},[(0,l._)("b",null,"Veuillez renseigner tous les champs requis !")],-1),pe={class:"form-group form-group-default"},ge=(0,l._)("label",null,"Culture désignation",-1),fe={class:"form-group form-group-default"},be=(0,l._)("label",null,"Catégorie culture",-1),_e=(0,l._)("option",{selected:"",value:""},"Sélectionnez une catégorie...",-1),ve=["value"],he={style:{display:"none"},class:"col-md-6"},we={class:"form-group form-group-default"},Ce=(0,l._)("label",null,"Détail",-1),ye={style:{display:"none"},class:"col-md-6"},ke={class:"form-group form-group-default"},Le=(0,l._)("label",null,"Valeur",-1),De={key:0,class:"fa fa-spinner fa-spin"},Se=(0,l._)("button",{class:"btn btn-danger","data-dismiss":"modal"},"Fermer",-1);function xe(e,t,a,s,i,r){const o=(0,l.up)("bs-modal");return(0,l.wg)(),(0,l.j4)(o,{id:"cultureCreateModal",title:"Création des cultures",onSubmit:(0,L.iM)(r.submitForm,["prevent"]),size:"modal-lg"},{"body-content":(0,l.w5)((()=>[(0,l._)("div",de,[(0,l._)("div",ue,[me,(0,l._)("div",pe,[ge,(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>i.form.nom=e),required:"",id:"Name",type:"text",class:"form-control",placeholder:"Entrez la désignation de la culture..."},null,512),[[L.nr,i.form.nom]])]),(0,l._)("div",fe,[be,(0,l.wy)((0,l._)("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>i.form.culture_categorie_id=e),required:"",class:"form-control",id:"formGroupDefaultSelect"},[_e,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(r.categories,(e=>((0,l.wg)(),(0,l.iD)("option",{key:e,value:e.culture_categorie_id},(0,I.zw)(e.categorie),9,ve)))),128))],512),[[L.bM,i.form.culture_categorie_id]])])]),(0,l._)("div",he,[(0,l._)("div",we,[Ce,(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>i.form.detail=e),required:"",id:"detail",type:"text",class:"form-control",placeholder:"Saisir le detail..."},null,512),[[L.nr,i.form.detail]])])]),(0,l._)("div",ye,[(0,l._)("div",ke,[Le,(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>i.form.valeur=e),required:"",id:"detail",type:"text",class:"form-control",placeholder:"Saisir la valeur..."},null,512),[[L.nr,i.form.valeur]])])])])])),"footer-content":(0,l.w5)((()=>[(0,l._)("button",{id:"submit-btn",type:"submit",class:(0,I.C_)(["btn btn-success",i.submitLoading?"disabled":""]),style:{"margin-right":"4px"}},[i.submitLoading?((0,l.wg)(),(0,l.iD)("i",De)):(0,l.kq)("",!0),(0,l.Uk)(" Soumettre les données ")],2),Se])),_:1},8,["onSubmit"])}var Ue={name:"culture-create-modal",data(){return{form:{culture_categorie_id:"",nom:"",detail:"",valeur:""},submitLoading:!1}},computed:{categories(){return this.$store.getters["dantic/GET_CATEGORIES"]}},methods:{submitForm(e){this.submitLoading=!0,K.Z.creerCulture(this.form,(e=>{console.log(JSON.stringify(e)),this.cleanForm(),this.submitLoading=!1,this.$store.dispatch("voirCultures"),Swal({icon:"success",title:"Succès !",text:"Création culture effectuée avec succès !",showConfirmButton:!1,timer:3e3})}))},cleanForm(){this.form.culture_categorie_id="",this.form.nom="",this.form.valeur="",this.form.detail=""}}};const Fe=(0,A.Z)(Ue,[["render",xe]]);var $e=Fe,Me={name:"Create-Categorie",data(){return{deleteLoading:"",dataLoading:!0,searchWord:""}},components:{createCultureModal:$e},methods:{deleteCulture(e){var t=new FormData;t.append("culture_id",e),t.append("agent_id",0),K.Z.deleteCulture(t,(()=>{this.$store.dispatch("voirCultures").then((e=>this.dataLoading=!1)).catch((e=>this.dataLoading=!1))}))}},created(){this.$store.dispatch("voirCultures").then((e=>this.dataLoading=!1)).catch((e=>this.dataLoading=!1))},computed:{cultures(){if(this.searchWord){let e=this.$store.getters.GET_CULTURES;return e.filter((e=>e.nom.toLowerCase().includes(this.searchWord.toLowerCase())))}return this.$store.getters.GET_CULTURES}}};const Ve=(0,A.Z)(Me,[["render",ce]]);var We=Ve,Ee={name:"CulturePage",components:{CategorieTab:J,CultureTab:We},async mounted(){await this.$store.dispatch("dantic/voirCategories")}};const Te=(0,A.Z)(Ee,[["render",k]]);var qe=Te}}]);
//# sourceMappingURL=973.b03fe670.js.map