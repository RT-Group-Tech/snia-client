"use strict";(self["webpackChunksnia"]=self["webpackChunksnia"]||[]).push([[792],{6792:function(e,t,i){i.r(t),i.d(t,{default:function(){return H}});var a=i(6252),s=i(9963),n=i(3577);const o=e=>((0,a.dD)("data-v-53b183e2"),e=e(),(0,a.Cn)(),e),l={class:"login bubble-shadow"},r={class:"wrapper wrapper-login bg-app-gradient wrapper-login-full p-0"},d=(0,a.uE)('<div class="login-aside w-50 d-flex flex-column align-items-center justify-content-center text-center" data-v-53b183e2><img src="assets/img/armoirie_rdc.png" alt="" class="img-fluid" data-v-53b183e2><h1 class="fw-bold display-4 text-white mb-2 mt-2 text-uppercase" style="font-family:Arial, Helvetica, sans-serif;" data-v-53b183e2> Ministère de l&#39;agriculture </h1><div class="d-flex align-content-center justify-content-center align-items-center w-25" data-v-53b183e2><div class="flex-fill" style="background-color:#00aeef;height:4px;" data-v-53b183e2></div><div class="flex-fill" style="background-color:#fff200;height:4px;" data-v-53b183e2></div><div class="flex-fill" style="background-color:#ed1c24;height:4px;" data-v-53b183e2></div></div></div>',1),c={class:"login-aside w-50 d-flex flex-column align-items-center justify-content-center"},u={key:0,class:"container container-login bg-white",id:"reset-box"},m=o((()=>(0,a._)("h3",{class:"text-center mb-3 title fadeIn"},"Veuillez réinitialiser votre mot de passe utilisateur !",-1))),p={class:"login-form"},f={class:"form-group form-floating-label"},g=o((()=>(0,a._)("label",{for:"npass",class:"placeholder text-color-snia"},"Nouveau mot de passe",-1))),h=o((()=>(0,a._)("div",{class:"invalid-feedback"}," Veuillez entrer le nouveau mot de passe ! ",-1))),b={class:"form-group form-floating-label"},v=["required"],y=o((()=>(0,a._)("label",{for:"confirm",class:"placeholder text-color-snia"},"Confirmation Nouveau mot de passe",-1))),w=o((()=>(0,a._)("div",{class:"invalid-feedback"}," Veuillez retaper le nouveau mot de passe ! ",-1))),q={class:"form-action mb-3"},k=["disabled"],_={key:0,class:"fa fa-spinner fa-spin mr-2"},O={key:1,class:"icon-login"},x={key:1,class:"container container-login bg-white",id:"reset-box"},R={class:"text-center mb-3 title fadeIn"},L={class:"text-center mb-3 title fadeIn"},U={class:"text-primary"},F={class:"login-form"},C={key:0,class:"form-group form-floating-label"},D=o((()=>(0,a._)("label",{for:"email",class:"placeholder text-color-snia"},"Adresse email",-1))),j=o((()=>(0,a._)("div",{class:"invalid-feedback"}," votre adresse email est requis ! ",-1))),z={class:"form-action mb-3"},S=["disabled"],V={key:0,class:"fa fa-spinner fa-spin mr-2"},P={key:1,class:"icon-login"},N=["disabled"],T={key:0,class:"fa fa-spinner fa-spin mr-2"},Z={key:1,class:"icon-refresh"};function I(e,t,i,o,$,I){const J=(0,a.up)("pin-input"),M=(0,a.up)("lottie-animation");return(0,a.wg)(),(0,a.iD)("div",l,[(0,a._)("div",r,[d,(0,a._)("div",c,[$.showUpdatePassFields?((0,a.wg)(),(0,a.iD)("div",u,[m,(0,a._)("form",{class:"needs-validation",id:"form-request",onSubmit:t[3]||(t[3]=(0,s.iM)(((...e)=>I.handleRequestUpdate&&I.handleRequestUpdate(...e)),["prevent"])),novalidate:""},[(0,a._)("div",p,[(0,a._)("div",f,[(0,a.wy)((0,a._)("input",{id:"npass","data-toggle":"tooltip","onUpdate:modelValue":t[0]||(t[0]=e=>$.form2.new_pass=e),title:"Saisir le nouveau mot de passe...",name:"npass",type:"password",class:"form-control input-border-bottom","data-placement":"right",required:""},null,512),[[s.nr,$.form2.new_pass]]),g,h]),(0,a._)("div",b,[(0,a.wy)((0,a._)("input",{id:"confirm","data-toggle":"tooltip","onUpdate:modelValue":t[1]||(t[1]=e=>$.form2.confirm=e),title:"Confirmation nouveau mot de passe ...",name:"confirm",type:"password",class:"form-control input-border-bottom","data-placement":"right",required:$.form2.new_pass!==$.form2.confirm||""!==$.form2.confirm},null,8,v),[[s.nr,$.form2.confirm]]),y,w]),(0,a._)("div",q,[(0,a._)("button",{disabled:$.requestLoading,type:"submit",id:"btn-request",class:"btn btn-snia btn-full btn-login mb-2"},[$.requestLoading?((0,a.wg)(),(0,a.iD)("i",_)):((0,a.wg)(),(0,a.iD)("i",O)),(0,a.Uk)("   Réinitialiser le mot de passe ")],8,k),(0,a._)("a",{href:"javascript:void(0)",onClick:t[2]||(t[2]=t=>e.$router.go(-1)),class:"link fw-mediumbold"},"Retour à la boite de connexion")])])],32)])):((0,a.wg)(),(0,a.iD)("div",x,[(0,a.wy)((0,a._)("h3",R,"Votre mot de passe est perdu ? Veuillez envoyer une requête de reinitialisation de mot de passe !",512),[[s.F8,!$.hasOtpReady]]),(0,a.wy)((0,a._)("h3",L,[(0,a.Uk)("Veuillez entrer le code OTP reussi à votre adresse email "),(0,a._)("small",U,(0,n.zw)($.form.email.substring(0,5))+"....."+(0,n.zw)($.form.email.slice(-10)),1)],512),[[s.F8,$.hasOtpReady]]),(0,a._)("form",{class:"needs-validation",id:"form-request",onSubmit:t[7]||(t[7]=(0,s.iM)(((...e)=>I.handleRequestOtp&&I.handleRequestOtp(...e)),["prevent"])),novalidate:""},[(0,a._)("div",F,[$.hasOtpReady?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",C,[(0,a.wy)((0,a._)("input",{id:"username","onUpdate:modelValue":t[4]||(t[4]=e=>$.form.email=e),"data-toggle":"tooltip",title:"Saisir votre adresse email...",name:"email",type:"email",class:"form-control input-border-bottom","data-placement":"right",required:""},null,512),[[s.nr,$.form.email]]),D,j])),$.hasOtpReady?((0,a.wg)(),(0,a.j4)(J,{key:1,onOnComplete:I.checkOtp},null,8,["onOnComplete"])):(0,a.kq)("",!0),(0,a._)("div",z,[(0,a.wy)((0,a._)("button",{disabled:$.requestLoading,type:"submit",id:"btn-request",class:"btn btn-snia btn-full btn-login mb-2"},[$.requestLoading?((0,a.wg)(),(0,a.iD)("i",V)):((0,a.wg)(),(0,a.iD)("i",P)),(0,a.Uk)("   Soumettre la requête reinitialisation ")],8,S),[[s.F8,!$.hasOtpReady]]),$.requestOtpLoading?((0,a.wg)(),(0,a.j4)(M,{key:0,json:$.json,"lottie-size":"70"},null,8,["json"])):(0,a.wy)(((0,a.wg)(),(0,a.iD)("button",{key:1,disabled:$.requestLoading,onClick:t[5]||(t[5]=(0,s.iM)(((...e)=>I.resendOtp&&I.resendOtp(...e)),["prevent"])),type:"button",id:"btn-request",class:"btn btn-snia btn-full btn-login mb-2"},[$.requestLoading?((0,a.wg)(),(0,a.iD)("i",T)):((0,a.wg)(),(0,a.iD)("i",Z)),(0,a.Uk)("   Renvoyer le code ")],8,N)),[[s.F8,$.hasOtpReady]]),(0,a._)("a",{href:"javascript:void(0)",onClick:t[6]||(t[6]=t=>e.$router.go(-1)),class:"link fw-mediumbold"},"Retour à la boite de connexion")])])],32)]))])])])}var J=i(7877),M=i(8381),B={name:"ResetPass",mounted(){this.$initBsTooltip()},data(){return{requestLoading:!1,requestOtpLoading:!1,hasOtpReady:!1,showUpdatePassFields:!1,agent:null,form:{email:""},form2:{new_pass:"",confirm:""},json:M}},methods:{handleRequestOtp(e){this.$validForm("form-request",e,((e,t)=>{e?(this.requestLoading=!0,J.Z.handleResetPass(this.form).then((e=>{if(this.requestLoading=!1,console.log(JSON.stringify(e)),null!==e){this.hasOtpReady=!0;let t=e.reponse.agent;this.agent=t}else this.$animatedFailedTask("login-box"),$.notify({icon:"fas fa-info",title:"Opération echoué!",message:"utilisateur non reconnu !"},{type:"danger",placement:{from:"bottom",align:"right"},time:5e3})})).catch((e=>{this.requestLoading=!1,this.$animatedFailedTask("login-box"),$.notify({icon:"fas fa-info",title:"Opération echoué!",message:"utilisateur non reconnu !"},{type:"danger",placement:{from:"bottom",align:"right"},time:5e3})}))):this.$animatedFailedTask("btn-request")}))},resendOtp(){this.requestLoading=!0,J.Z.handleResetPass(this.form).then((e=>{if(this.requestLoading=!1,console.log(JSON.stringify(e)),null!==e){this.hasOtpReady=!0;let t=e.reponse.agent;this.agent=t}})).catch((e=>{this.requestLoading=!1,$.notify({icon:"fas fa-info",title:"Opération echoué!",message:"Une est servenue lors du traitement de cette requête, veuillez réessayer ultérieurement !"},{type:"danger",placement:{from:"bottom",align:"right"},time:5e3})}))},checkOtp(e){this.requestOtpLoading=!0;let t={agent_id:this.agent.agent_id,otp:e};J.Z.checkOtp(t).then((e=>{console.log(JSON.stringify(e)),this.requestOtpLoading=!1,null!==e&&(this.showUpdatePassFields=!0,this.hasOtpReady=!1)})).catch((e=>{this.requestLoading=!1,$.notify({icon:"fas fa-info",title:"Opération echoué!",message:"Veuillez entrer un code valide !"},{type:"danger",placement:{from:"bottom",align:"right"},time:3e3})})),console.log("handle otp ::: ",e)},handleRequestUpdate(e){this.$validForm("form-request",e,((e,t)=>{if(e){this.requestLoading=!0;let e={agent_id:this.agent.agent_id,new_pass:this.form2.new_pass};J.Z.updatePassword(e).then((e=>{console.log(JSON.stringify(e)),null!=e&&(Swal({icon:"success",title:"Opération reussie",text:"La réinitialisation du mot de passe effectué, veuillez désormais utiliser le nouveau mot de passe pour vous connecter dans système !",timer:4e3,showConfirmButton:!1,showCancelButton:!1}),this.$router.go(-1))})).catch((e=>{this.requestLoading=!1,$.notify({icon:"fas fa-info",title:"Echec de l'opération!",message:"L'opération de réinitialisation mot de passe a echouée !"},{type:"danger",placement:{from:"bottom",align:"right"},time:3e3}),console.log("error request:::",e)}))}else this.$animatedFailedTask("btn-request")}))}}},A=i(3744);const E=(0,A.Z)(B,[["render",I],["__scopeId","data-v-53b183e2"]]);var H=E}}]);
//# sourceMappingURL=792.69209138.js.map